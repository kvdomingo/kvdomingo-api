<h3>File formats</h3>

<p>
    The image I used for the comparison of file sizes is an HDR image of the Oblation Plaza overlooking University Avenue during sunset taken by myself, shown in Fig. <a href="#fig:original">1</a>. Its histogram is shown in Fig. <a href="#fig:histogram">2</a>. I've already post-processed the image so that it displays properly on print or on non-HDR-capable devices. Thefile sizes themselves are shown in Table <a href="#tab:sizes">1</a>. In the interest of minimizing the size of this document, I will no longer include the images saved in other file formats if there is no perceivable change in quality/characteristics.
</p>

<div class="container text-center my-5 px-md-5 w-responsive">
    <img id="fig:original" class="cld-responsive img-fluid" data-src="https://res.cloudinary.com/kdphotography-assets/image/upload/c_scale,dpr_auto,w_auto/v1/svip/186/3-ImageTypes/DSC_8805.png" />
    <p>
        Figure 1: Image used for comparison of file sizes.
    </p>
</div>

<div class="container text-center my-5 px-md-5 w-responsive">
    <img id="fig:histogram" class="cld-responsive img-fluid" data-src="https://res.cloudinary.com/kdphotography-assets/image/upload/c_scale,dpr_auto,w_auto/v1/svip/186/3-ImageTypes/histogram.png" />
    <p>
        Figure 2: Red, green, blue, and gray histograms of Fig. <a href="#fig:original">1</a>.
    </p>
</div>

<div class="container text-center my-5 px-md-5 w-responsive">
    <p id="tab:sizes">
        Table 1: File sizes for various saved formats of Fig. <a href="#fig:original">1</a>.
    </p>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th scope="col">Format</th>
                <th scope="col">Size (kB)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>16-bit <code>BMP</code></td>
                <td>3,418</td>
            </tr>
            <tr>
                <td>8-bit <code>PNG</code></td>
                <td>3,240</td>
            </tr>
            <tr>
                <td>24-bit <code>JPG</code></td>
                <td>1,474</td>
            </tr>
            <tr>
                <td>8-bit <code>TIFF</code></td>
                <td>1,053</td>
            </tr>
            <tr>
                <td>8-bit <code>GIF</code></td>
                <td>533</td>
            </tr>
            <tr>
                <td><code>JPG</code> (binary)</td>
                <td>391</td>
            </tr>
        </tbody>
    </table>
</div>

<p>
    In order to produce a binary image, I applied a threshold of 192 to Fig. <a href="#fig:original">1</a>. The result is shown in Fig. <a href="#fig:binary">3</a>.
</p>

<div class="container text-center my-5 px-md-5 w-responsive">
    <img id="fig:binary" class="cld-responsive img-fluid" data-src="https://res.cloudinary.com/kdphotography-assets/image/upload/c_scale,dpr_auto,w_auto/v1/svip/186/3-ImageTypes/DSC_8805_bin.png" />
    <p>
        Figure 3: Fig. <a href="#fig:original">1</a> saved as a binary image.
    </p>
</div>

<p>
    In order to produce an indexed image, Ifirst imported the image into Photoshop and set it to Index mode. I then extracted the 256 most common colors and saved them as a Photoshop Color Table (<code>.act</code>). I then applied this color indexing to the image and saved it, one as a <code>TIFF</code> and one as a <code>GIF</code>. The result of the <code>TIFF</code> indexing along with its color table is shown in Fig. <a href="#fig:tiff">4</a> and Table <a href="#tab:index">2</a>, respectively. Notice that the ground portion of the image still looks decent because the boundaries of each color are considerably well-defined. However, the sky portion exhibits some visible degradation due to the smooth gradients in the original image. The <code>GIF</code> indexing in Fig. <a href="#fig:gif">5</a> exhibits degradation even in the ground portion. I found out that this was due to the difference in the way the colors are sampled. In the former, the sampling of colors is locally adaptive, which allows transition of colors to be smoother, while in the latter, the sampling is uniform.
</p>

<div class="container text-center my-5 px-md-5 w-responsive">
    <img id="fig:tiff" class="cld-responsive img-fluid mx-auto" data-src="https://res.cloudinary.com/kdphotography-assets/image/upload/c_scale,dpr_auto,w_auto/v1/svip/186/3-ImageTypes/DSC_8805_tiff_indexed.png" />
    <p>
        Figure 4: Fig. <a href="#fig:original">1</a> saved as a <code>TIFF</code> indexed image.
    </p>
</div>

<div class="container text-center my-5 px-md-5 w-responsive">
    <p id="tab:index" class="px-md-5">
        Table 2: First and last few elements of the color table for Fig. <a href="#fig:tiff">4</a>.
    </p>
    <div class="table-responsive">
        <table class="table table-bordered px-md-5">
            <thead>
                <tr>
                    <th scope="col">Index</th>
                    <th scope="col">R</th>
                    <th scope="col">G</th>
                    <th scope="col">B</th>
                    <th scope="col">Color</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>0</td>
                    <td>74</td>
                    <td>24</td>
                    <td>26</td>
                    <td style="background-color: rgb(74, 24, 26);"></td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>177</td>
                    <td>168</td>
                    <td>169</td>
                    <td style="background-color: rgb(177, 168, 169);"></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>248</td>
                    <td>168</td>
                    <td>184</td>
                    <td style="background-color: rgb(248, 168, 184);"></td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>232</td>
                    <td>168</td>
                    <td>184</td>
                    <td style="background-color: rgb(232, 168, 184);"></td>
                </tr>
                <tr>
                    <td>$\vdots$</td>
                    <td>$\vdots$</td>
                    <td>$\vdots$</td>
                    <td>$\vdots$</td>
                    <td>$\vdots$</td>
                </tr>
                <tr>
                    <td>254</td>
                    <td>7</td>
                    <td>7</td>
                    <td>7</td>
                    <td style="background-color: rgb(7, 7, 7);"></td>
                </tr>
                <tr>
                    <td>255</td>
                    <td>255</td>
                    <td>255</td>
                    <td>255</td>
                    <td style="background-color: rgb(255, 255, 255);"></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="container text-center my-5 px-md-5 w-responsive">
    <img id="fig:gif" class="cld-responsive img-fluid" data-src="https://res.cloudinary.com/kdphotography-assets/image/upload/c_scale,dpr_auto,w_auto/v1/svip/186/3-ImageTypes/DSC_8805_gif_indexed.png" />
    <p class="px-md-5">
        Figure 5: Fig. <a href="#fig:original">1</a> saved as a <code>GIF</code> indexed image.
    </p>
</div>

<h3>History</h3>
<p>
    Camera sensors are composed of arrays of light-sensitive detectors, and each component of these detectors have varying sensitivities and transfer functions which convert incident light into the red, green, and blue channels. In the <code>RAW</code> file format, the raw information captured by the sensor is stored without any compression or manipulation. This technology is still used at present especially by professional camera manufacturers&mdash;such as Nikon's <code>NEF</code> format and Canon's <code>CR2</code> format&mdash;in order to preserve all the information received by the camera's sensor, which provides an advantage when post-processing later on, especially when shooting in low light. As imaging technology developed, so has our ability to reproduce larger images. Eventually, storage capacity became an issue, which birthed the challenge of data compression.
</p>

<p>
    One of the first formats to have taken up this challenge is the Graphics Interchange Format (<code>GIF</code>) in 1987 [<a href="#Roelofs1999">1</a>]. It uses the Lempel-Ziv-Welch (<code>LZW</code>) lossless compression algorithm, which provides up to 25% compression. However, <code>GIF</code> is a pixel-dependent, 8-bit indexed format, so images could not show their full color range in this format. The le format quickly fell out of favor when its compression technique was patented in 1995 by Unisys Corporation [<a href="#Wiggins2001">2</a>], who attempted to collect royalties from <code>GIF</code> users. <b>Capitalism strikes again!</b>
</p>

<p>
    In the early 1990's, the International Organization for Standardization (ISO) and the International Telecommunication Union (ITU) formed a joint committee called the Joint Photographic Expert Group, the creator of the eponymous <code>JPEG</code> format. Its most common incarnation is the 24-bit version, which allocates 8 bits for each color channel, and its strength lies in its lossy discrete cosine transform (DCT)-based compression format to achieve up to 5% compression. The way it is encoded allows the user to set the compression level desired, and for normal day-to-day usage, the data it discards is usually imperceptible.
</p>

<p>
    In 1986, the Tagged Image File Format (<code>TIFF</code>) was developed by Microsoft and Aldus (now merged with Adobe), and takes its name due to its heavy dependence on tags, which relay the image information to the program accessing thele. It is highly versatile, supports a wide range of sizes, resolutions and color depths [<a href="#Wiggins2001">2</a>], and can use <code>LZW</code>, <code>ZIP</code>, or other compression methods. However, its large file size as a consequence of its complexity limits its practical use.
</p>

<p>
    In 1995, the Portable Network Graphics (<code>PNG</code>) format was created as the spiritual successor of <code>GIF</code> and hailed by some as the future of bit-mapped images [<a href="#Wiggins2001">2</a>]. Out of all the formats discussed here, it is probably the most flexible and allows for lossless compression, device-independent gamma correction, device-independent brightness consistency, transparency (now better-known as the alpha channel), redundant self-verication of data integrity, interlacing, and various pixel mapping schemes (indexed, grayscale, or true-color RGB).
</p>

<h3>Programming basic imaging functions</h3>
<p>
    Some of the libraries that can be used for image processing in Python include the <code>matplotlib</code>, <code>opencv2</code>, and <code>PIL</code> modules. Some basic functions include:
    <ul>
        <li>
            <code>cv2.imread</code>: reads an image from the computer and loads it as an n-dimensional <code>numpy</code> array.
        </li>
        <li>
            <code>matplotlib.pyplot.savefig</code>: saves a valid <code>numpy</code> array as an image with the specied file format.
        </li>
        <li>
            <code>PIL._getexif</code>: extracts the image metadata and stores it as a dictionary.
        </li>
        <li>
            <code>matplotlib.pyplot.hist</code>: plots the histogram of an image.
        </li>
        <li>
            <code>cv2.COLOR_RGB2GRAY</code>: converts an RGB image to grayscale; can be passed as an argument in <code>cv.imread</code>.
        </li>
    </ul>
</p>

<h3>References</h3>
<ol class="reference">
    <li id="Roelofs1999">
        G. Roelofs, <a href="http://www.libpng.org/pub/png/pnghist.html" target="_blank">History of the portable networks graphics format</a> (1999).
    </li>
    <li>
        R. H. Wiggins, C. Davidson, R. Harnsberger, J. R. Lauman, and P. A. Goede, Image formats: Past, present, and future, <a href="http://dx.doi.org/10.1148/radiographics.21.3.g01ma25789" target="_blank"><i>RadioGraphics</i> <b>21</b></a> (2001).
    </li>
</ol>
